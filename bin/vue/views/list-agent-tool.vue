<template id="list-agent-tool">

    <app-frame>



        <div style="text-align: left;padding-left: 20px;width: 95%;">


            <div class="infoBox">
                <el-text type="info" size="medium">
                    *å¤§æ¨¡å‹Agentåœ¨äº¤äº’è¿‡ç¨‹ä¸­å¯ä»¥è°ƒç”¨çš„å·¥å…·ï¼Œç”¨äºå¼¥è¡¥å¤§æ¨¡å‹ä¿¡æ¯æŸ¥è¯¢ä¸æœ¬åœ°å‡½æ•°è°ƒç”¨æ–¹é¢çš„å±€é™ã€‚
                </el-text><br />
            </div>

            <el-space :fill="true" wrap style="width:100%;">

                <el-divider content-position="left">
                    <el-text type="info">å†…ç½®ç‰¹è‰²å·¥å…·</el-text>
                </el-divider>

                <div>
                    <el-row :gutter="10" justify="left">

                        <el-col :span="6">
                            <el-card shadow="hover" class="feature-card">
                                <div class="card-content">
                                    <img src="/images/tools/search2.png"
                                        style="width:90px;height:90px;margin-top: -10px;" class="circle-icon" />
                                    <h3 class="feature-title">äº’è”ç½‘æœç´¢</h3>
                                    <p class="feature-description">
                                        å¯ä»¥ä¾›Agentè‡ªåŠ¨è°ƒç”¨çš„è¿›è¡Œäº’è”ç½‘æœç´¢çš„å·¥å…·ï¼ˆéœ€è”ç½‘ï¼‰ã€‚
                                    </p>

                                    <div style="text-align: center;width:100%;">
                                        <el-link href="/user/user_web_search" type="info" title="">
                                            é©¬ä¸Šä½¿ç”¨ >
                                        </el-link>
                                    </div>
                                </div>
                            </el-card>
                        </el-col>

                        <el-col :span="6">
                            <el-card shadow="hover" class="feature-card">
                                <div class="card-content">
                                    <img src="/images/tools/weather2.png"
                                        style="width:90px;height:90px;margin-top: -10px;" class="circle-icon" />
                                    <h3 class="feature-title">å¤©æ°”é¢„æŠ¥</h3>
                                    <p class="feature-description">
                                        å¯ä»¥ä¾›Agentè‡ªåŠ¨è°ƒç”¨çš„æŸ¥è¯¢å½“å‰æ‰€æœ‰çš„åŸå¸‚çš„å¤©æ°”é¢„æŠ¥çš„å·¥å…·ï¼ˆéœ€è”ç½‘ï¼‰ã€‚
                                    </p>

                                    <div style="text-align: center;width:100%;">
                                        <el-link href="#" type="info" title="" @click="this.testWeather()">
                                            é©¬ä¸Šä½¿ç”¨ >
                                        </el-link>
                                    </div>
                                </div>
                            </el-card>
                        </el-col>

                        <el-col :span="6">
                            <el-card shadow="hover" class="feature-card">
                                <div class="card-content">
                                    <img src="/images/tools/location2.webp"
                                        style="width:90px;height:90px;margin-top: -10px;" class="circle-icon" />
                                    <h3 class="feature-title">æœ¬åœ°åœ°å€</h3>
                                    <p class="feature-description">
                                        å¯ä»¥ä¾›Agentè‡ªåŠ¨è°ƒç”¨çš„æŸ¥è¯¢å½“å‰ç³»ç»Ÿæ‰€åœ¨çš„åœ°ç†åœ°å€çš„åŠŸèƒ½ï¼ˆéœ€è”ç½‘ï¼‰ã€‚
                                    </p>

                                    <div style="text-align: center;width:100%;">
                                        <el-link href="#" type="info" title="" @click="this.testAddress()">
                                            é©¬ä¸Šä½¿ç”¨ >
                                        </el-link>
                                    </div>
                                </div>
                            </el-card>
                        </el-col>

                        <el-col :span="6">
                            <el-card shadow="hover" class="feature-card">
                                <div class="card-content">
                                    <img src="/images/tools/time2.png" style="width:90px;height:90px;margin-top: -10px;"
                                        class="circle-icon" />
                                    <h3 class="feature-title">æœ¬åœ°æ—¶é—´</h3>
                                    <p class="feature-description">
                                        å¯ä»¥ä¾›Agentè‡ªåŠ¨è°ƒç”¨çš„æŸ¥è¯¢æœ¬åœ°æ—¶é—´çš„å·¥å…·ï¼ˆæ— éœ€è”ç½‘ï¼‰ã€‚
                                    </p>

                                    <div style="text-align: center;width:100%;">
                                        <el-link href="#" type="info" title="" @click="this.testLocalTime()">
                                            é©¬ä¸Šä½¿ç”¨ >
                                        </el-link>
                                    </div>
                                </div>
                            </el-card>
                        </el-col>

                        <el-col :span="6">
                            <el-card shadow="hover" class="feature-card">
                                <div class="card-content">
                                    <img src="/images/tools/report2.png"
                                        style="width:90px;height:90px;margin-top: -10px;" class="circle-icon" />
                                    <h3 class="feature-title">å›¾è¡¨ç”Ÿæˆ</h3>
                                    <p class="feature-description">
                                        å¯å°†å¤§æ¨¡å‹å›ç­”ç»“æœæ•´ç†æˆå›¾è¡¨å·¥å…·éœ€è¦çš„æ ¼å¼å¹¶ç”Ÿæˆå›¾è¡¨ï¼ˆæ— éœ€è”ç½‘ï¼‰ã€‚
                                    </p>

                                    <div style="text-align: center;width:100%;">
                                        <el-link href="#" type="info" title="" disabled>
                                            æ•¬è¯·æœŸå¾… >
                                        </el-link>
                                    </div>
                                </div>
                            </el-card>
                        </el-col>

                        <el-col :span="6">
                            <el-card shadow="hover" class="feature-card">
                                <div class="card-content">
                                    <img src="/images/tools/ppt_gen2.png"
                                        style="width:90px;height:90px;margin-top: -10px;" class="circle-icon" />
                                    <h3 class="feature-title">PPTåˆ¶ä½œ</h3>
                                    <p class="feature-description">
                                        å¯å°†å¤§æ¨¡å‹å›ç­”ç»“æœæ•´ç†æˆåˆ¶ä½œPPTéœ€è¦çš„æ ¼å¼å¹¶ç”ŸæˆPPTï¼ˆæ— éœ€è”ç½‘ï¼‰ã€‚
                                    </p>

                                    <div style="text-align: center;width:100%;">
                                        <el-link href="/user/user_make_ppt" type="info" title="">
                                            é©¬ä¸Šä½¿ç”¨ >
                                        </el-link>
                                    </div>
                                </div>
                            </el-card>
                        </el-col>


                    </el-row>
                </div>



            </el-space>
        </div>


        <el-dialog v-model="dialogVisible" title="æŸ¥è¯¢ç»“æœ" width="800" :before-close="handleClose" style="text-align: left;">
            <div v-html="message" style="line-height: 1.6; font-family: 'Microsoft YaHei', sans-serif;"></div>
            <template #footer>
                <div class="dialog-footer">
                    <el-button type="primary" @click="dialogVisible = false">
                        ç¡®å®š
                    </el-button>
                </div>
            </template>
        </el-dialog>

    </app-frame>



</template>
<script>

const ListAgentTool = {
    mounted() {

    },
    data() {
        return {
            message: "...",
            dialogVisible:false,
            localTime: '',
            address: {},
            weather: {},
        };
    },
    methods: {


        testAddress() {
            let url = "/api/local_address";
            this.dialogVisible = true;
            axios.get(url).then((response) => {
                this.address = response.data;
                this.message = this.address;
                // console.log(response.data);
            });
        },

        testLocalTime() {
            let url = "/api/local_time";
            this.dialogVisible = true;
            axios.get(url).then((response) => {
                this.localTime = response.data;
                this.message = this.localTime;
                // console.log(response.data);
            });
        },

        testWeather() {
            let url = "/api/weather";
            this.dialogVisible = true;
            
            // å…ˆè·å–åœ°å€ä¿¡æ¯ï¼Œç„¶ååœ¨å›è°ƒä¸­è·å–å¤©æ°”ä¿¡æ¯
            axios.get("/api/local_address").then((addressResponse) => {
                this.address = addressResponse.data;
                let rs = this.address.split("-");
                let city = rs[rs.length - 1];
                console.log(city);
                
                let params = {
                    "city": city,
                    "days": 3
                }
                
                return axios.post(url, params, {
                    headers: {
                        'Content-Type': 'application/x-www-form-urlencoded'
                    }
                });
            }).then((weatherResponse) => {
                this.weather = weatherResponse.data;
                console.log(this.weather)
                this.message = this.formatWeatherData(this.weather);
            }).catch((error) => {
                console.error('è·å–å¤©æ°”ä¿¡æ¯å¤±è´¥:', error);
                this.message = 'è·å–å¤©æ°”ä¿¡æ¯å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•';
            });
        },

        formatWeatherData(weatherData) {
            if (!weatherData || weatherData.status !== 'ok') {
                return 'è·å–å¤©æ°”ä¿¡æ¯å¤±è´¥';
            }

            let html = `<div style="text-align: center; margin-bottom: 15px;"><b style="font-size: 16px; color: #409eff;">ğŸŒŸ ${weatherData.city} å¤©æ°”åŠæœªæ¥2å¤©é¢„æŠ¥</b></div>`;
            
            if (weatherData.items && weatherData.items.length > 0) {
                html += '<table style="width:100%; border-collapse: collapse; font-size: 14px;">';
                html += '<thead><tr style="background-color: #f5f7fa;">';
                html += '<th style="padding: 8px; border: 1px solid #dcdfe6; text-align: center;">ğŸ“… æ—¥æœŸ</th>';
                html += '<th style="padding: 8px; border: 1px solid #dcdfe6; text-align: center;">ğŸŒ¡ï¸ æ¸©åº¦</th>';
                html += '<th style="padding: 8px; border: 1px solid #dcdfe6; text-align: center;">â˜€ï¸ ç™½å¤©</th>';
                html += '<th style="padding: 8px; border: 1px solid #dcdfe6; text-align: center;">ğŸŒ™ å¤œé—´</th>';
                html += '<th style="padding: 8px; border: 1px solid #dcdfe6; text-align: center;">ğŸ’¨ é£å‘/é£åŠ›</th>';
                html += '<th style="padding: 8px; border: 1px solid #dcdfe6; text-align: center;">ğŸ’§ æ¹¿åº¦</th>';
                html += '<th style="padding: 8px; border: 1px solid #dcdfe6; text-align: center;">ğŸŒ… æ—¥å‡º</th>';
                html += '<th style="padding: 8px; border: 1px solid #dcdfe6; text-align: center;">ğŸŒ† æ—¥è½</th>';
                html += '<th style="padding: 8px; border: 1px solid #dcdfe6; text-align: center;">ğŸŒ™ æœˆç›¸</th>';
                html += '</tr></thead><tbody>';
                
                weatherData.items.forEach((item, index) => {
                    const rowStyle = index % 2 === 0 ? 'background-color: #ffffff;' : 'background-color: #fafafa;';
                    html += `<tr style="${rowStyle}">`;
                    html += `<td style="padding: 8px; border: 1px solid #dcdfe6; text-align: center;">${item.fxDate}</td>`;
                    html += `<td style="padding: 8px; border: 1px solid #dcdfe6; text-align: center;">${item.tempMin}Â°C~${item.tempMax}Â°C</td>`;
                    html += `<td style="padding: 8px; border: 1px solid #dcdfe6; text-align: center;">${item.textDay}</td>`;
                    html += `<td style="padding: 8px; border: 1px solid #dcdfe6; text-align: center;">${item.textNight}</td>`;
                    html += `<td style="padding: 8px; border: 1px solid #dcdfe6; text-align: center;">${item.windDirDay}${item.windScaleDay}çº§</td>`;
                    html += `<td style="padding: 8px; border: 1px solid #dcdfe6; text-align: center;">${item.humidity}%</td>`;
                    html += `<td style="padding: 8px; border: 1px solid #dcdfe6; text-align: center;">${item.sunrise}</td>`;
                    html += `<td style="padding: 8px; border: 1px solid #dcdfe6; text-align: center;">${item.sunset}</td>`;
                    html += `<td style="padding: 8px; border: 1px solid #dcdfe6; text-align: center;">${item.moonPhase}</td>`;
                    html += '</tr>';
                });
                
                html += '</tbody></table>';
            }
            
            return html;
        },


        formatTime(timestamp) {
            return timestampToString(timestamp);
        }

    },
    template: "#list-agent-tool"
};

app.component("list-agent-tool", ListAgentTool);
</script>
<style scoped>
.bleft {
    /* justify-content: flex-start;
  display: flex; */
    display: inline-block;
}

.bright {
    /* flex:1;           
  justify-content: flex-end;
  display: flex; */
    float: right;
}

.infoBox {
    margin: 5px 0px 5px 0px;
    padding: 10px 10px 10px 10px;
    background-color: #F2F6FC;
}



.feature-card {
    text-align: center;
    padding: 0px;
    transition: transform 0.3s;
    margin-bottom: 10px;
}

.feature-card:hover {
    transform: translateY(-5px);
}

.card-content {
    display: flex;
    flex-direction: column;
    align-items: center;
}

.feature-icon {
    margin-top: -10px;
    margin-bottom: 0px;
    color: #409eff;
    /* å›¾æ ‡é¢œè‰²ï¼Œå¯ä»¥æ ¹æ®è®¾è®¡éœ€æ±‚è°ƒæ•´ */
}

.feature-title {
    font-size: 12px;
    margin-bottom: 0px;
    color: #333;
}

.feature-description {
    font-size: 12px;
    color: #666;
    margin: 10px -5px 20px -5px;
    line-height: 20px;
}

.circle-icon {
    width: 100px;
    /* ä½ å¯ä»¥æ ¹æ®éœ€è¦è°ƒæ•´å¤§å° */
    height: 100px;
    background-color: white;
    /* å›¾æ ‡èƒŒæ™¯è‰²ï¼Œå¯ä»¥æ ¹æ®éœ€è¦æ›´æ”¹ */
    border-radius: 50%;
    /* ä½¿å›¾æ ‡æˆä¸ºåœ†å½¢ */
    display: flex;
    justify-content: center;
    align-items: center;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    /* æ·»åŠ é˜´å½±æ•ˆæœ */
}
</style>
